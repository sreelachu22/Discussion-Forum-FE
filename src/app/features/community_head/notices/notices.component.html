<!-- notices.component.html -->
<div class="container">
  <div class="row">
    <div class="col-8">
      <h1>Notices</h1>
    </div>
    <div class="col-4 text-right">
      <!-- <button class="btn btn-primary" (click)="addNotice()">Create Notice</button> -->
      <button class="btn btn-primary" (click)="openModal(openmodalTemplate)">Create Notice</button>
    </div>
  </div>

  <div *ngFor="let notice of notices">
    <div class="card">
      <div class="card-body">
        <b><p>Notice ID: {{ notice.noticeID }}</p></b>
        <h3 class="card-title">{{ notice.title }}</h3>
        <p class="card-text">{{ notice.content }}</p>
        <p class="card-text">Created At: {{ notice.createdAt }}</p>
        <p *ngIf="notice.modifiedAt" class="card-text">Modified At: {{ notice.modifiedAt }}</p>
        <p class="card-text">Expires At: {{ notice.expiresAt }}</p>
        <!-- <button class="btn btn-primary notices_body_edit_button" (click)="updateNotice(notice)">Edit</button> -->
        <button class="btn btn-warning" (click)="openUpdateModal(updatemodalTemplate, notice)">Edit</button>
        <button class="btn btn-danger notices_body_delete_button" (click)="deleteNotice(notice.noticeID)">Delete</button>
      </div>
    </div>
    <hr />
  </div><!-- Your existing button to open the modal -->
  

  <!-- Add this modal template at the end of your HTML file -->
<ng-template #openmodalTemplate>
  <div class="modal-header">
    <h4 class="modal-title">Create Notice</h4>
    <button type="button" class="close" (click)="modalRef?.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <!-- Add input fields for dynamic user input -->
    <div class="form-group">
      <label for="communityID">Community ID</label>
      <input type="text" class="form-control" [(ngModel)]="newNotice.communityID" name="communityID" required>
    </div>
    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" class="form-control" [(ngModel)]="newNotice.title" name="title" required>
    </div>
    <div class="form-group">
      <label for="content">Content</label>
      <textarea class="form-control" [(ngModel)]="newNotice.content" name="content" required></textarea>
    </div>
    <!-- <div class="form-group">
      <label for="expiresAt">Expires At</label>
      <input type="text" class="form-control" [(ngModel)]="newNotice.expiresAt" name="expiresAt" required>
    </div> -->
    <div class="form-group">
      <label for="expiresAt">Expires At</label>
      <input type="text" class="form-control" [(ngModel)]="newNotice.expiresAt" name="expiresAt" required
      autocomplete="off" bsDatepicker [bsConfig]="{ dateInputFormat: 'YYYY-MM-DDTHH:mm:ss.SSS' }" >
    </div>
    <div class="form-group">
      <label for="createdBy">Created By</label>
      <input type="text" class="form-control" [(ngModel)]="newNotice.createdBy" name="createdBy" required>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="addNotice()">Add Notice</button>
    <button type="button" class="btn btn-secondary" (click)="modalRef?.hide()">Close</button>
  </div>
</ng-template>











<ng-template #updatemodalTemplate>
  <div class="modal-header">
    <h4 class="modal-title">Edit Notice</h4>
    <button type="button" class="close" (click)="modalRef?.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  
  <div class="modal-body">
    <!-- Add input fields for dynamic user input -->
    <div class="form-group">
      <label for="id">Notice ID</label>
      <input type="text" class="form-control" [(ngModel)]="selectedNotice.id" name="id" id="id" required>
    </div>
    <div class="form-group">
      <label for="communityID">Community ID</label>
      <input type="text" class="form-control" [(ngModel)]="selectedNotice.communityID" name="communityID" id="communityID">
    </div>
    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" class="form-control" [(ngModel)]="selectedNotice.title" name="title" id="title">
    </div>
    <div class="form-group">
      <label for="content">Content</label>
      <textarea class="form-control" [(ngModel)]="selectedNotice.content" name="content" id="content"></textarea>
    </div>
    <div class="form-group">
      <label for="expiresAt">Expires At</label>
      <input type="text" class="form-control" [(ngModel)]="selectedNotice.expiresAt" name="expiresAt" id="expiresAt">
    </div>
    
    <div class="form-group">
      <label for="createdBy">Created By</label>
      <input type="text" class="form-control" [(ngModel)]="selectedNotice.createdBy" name="createdBy">
    </div>
    <div class="form-group">
      <label for="modifiedBy">Modified By</label>
      <input type="text" class="form-control" [(ngModel)]="selectedNotice.modifiedBy" name="modifiedBy">
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="updateNotice()">Update Notice</button>
    <button type="button" class="btn btn-secondary" (click)="modalRef?.hide()">Close</button>
  </div>
</ng-template>

  
  <!-- Modal template -->
  
<!-- <div>
  <form (submit)="addNotice()">
    <label for="communityID">Community ID:</label>
    <input type="number" id="communityID" [(ngModel)]="newNotice.communityID" required>
  
    <label for="title">Title:</label>
    <input type="text" id="title" [(ngModel)]="newNotice.title" required>
    
    <label for="content">Content:</label>
    <textarea id="content" [(ngModel)]="newNotice.content" required></textarea>
    
    <label for="expiresAt">Expires At:</label>
    <input type="text" id="expiresAt" [(ngModel)]="newNotice.expiresAt" required>
  
    <label for="createdBy">Created By:</label>
    <input type="text" id="createdBy" [(ngModel)]="newNotice.createdBy" required>
  
    <label for="modifiedBy">Modified By:</label>
    <input type="text" id="modifiedBy" [(ngModel)]="newNotice.modifiedBy" required>
  
    <button type="submit">Add Notice</button>
  </form>
  
</div>

</div>
 <button class="btn btn-primary" (click)="createNotice()">Create Notice</button>-->
