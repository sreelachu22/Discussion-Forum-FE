<div class="container">
  <div class="top_nav">
    <div>
      <a href="/admin_dashboard_page" class="breadcrumb_navigation"
        >Admin Dashboard</a
      ><span> > </span
      ><span
        ><a
          href="/admin_dashboard_page/:superadmin_category_management"
          class="breadcrumb_navigation"
          >Category Management</a
        ></span
      >
    </div>
  </div>
  <br />
  <nav class="navbar navbar-dark bg-secondary">
    <p class="header_text">Category Management</p>
    <div class="create_button">
      <app-button
        buttonClass="btn btn-primary"
        buttonName="Create Category"
        (buttonClick)="openCreateCategoryModal(create)"
      ></app-button>
    </div>
  </nav>
  <ng-template #create>
    <div class="modal-header">
      <h4 class="modal-title">Create Category</h4>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="createCategory()" #categoryForm="ngForm">
        <div class="form-group">
          <label for="newCategoryName">New Category Name:</label>
          <textarea
            class="form-control"
            name="newCategoryName"
            [(ngModel)]="newCategoryName"
            required
          ></textarea>
        </div>
        <br />
        <div class="buttons">
          <button
            type="submit"
            class="btn btn-primary custom-btn"
            [disabled]="!newCategoryName"
          >
            Create
          </button>
          <span> </span>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="closeModal()"
          >
            Close
          </button>
        </div>
      </form>
    </div>
  </ng-template>
  <br />
  <!-- Display Category Cards -->
  <div class="card-container">
    <div
      *ngFor="let category of categories"
      class="card"
      (mouseover)="setHoveredCategoryId(category.communityCategoryID)"
      (mouseout)="setHoveredCategoryId(null)"
    >
      <div class="card-body" (click)="openUpdateModal(update)">
        <ng-template #update>
          <div class="modal-header">
            <h4 class="modal-title">Edit Category</h4>
            <button
              type="button"
              class="close"
              aria-label="Close"
              (click)="closeModal()"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form
              (ngSubmit)="updateCategory(category.communityCategoryID)"
              #categoryForm="ngForm"
            >
              <div class="form-group">
                <label for="oldCategoryName">Old Category Name:</label>
                <textarea
                  class="form-control"
                  name="oldCategoryName"
                  [(ngModel)]="category.communityCategoryName"
                  readonly
                ></textarea>
              </div>

              <div class="form-group">
                <label for="newCategoryName">New Category Name:</label>
                <textarea
                  class="form-control"
                  name="newCategoryName"
                  [(ngModel)]="newCategoryName"
                ></textarea>
              </div>
              <br />
              <div class="buttons">
                <button
                  type="submit"
                  class="btn btn-primary custom-btn"
                  [disabled]="!newCategoryName"
                >
                  Update
                </button>
                <span></span>
                <button class="btn btn-default" (click)="closeModal()"></button>
                <button
                  type="button"
                  class="btn btn-danger"
                  (click)="openDeleteCategoryModal(delete)"
                >
                  Delete
                </button>
              </div>
            </form>
          </div>
        </ng-template>

        <ng-template #delete>
          <div class="modal-body text-center">
            <p>Do you want to confirm?</p>
            <button
              type="button"
              class="btn btn-default"
              (click)="confirm(category.communityCategoryID)"
            >
              Yes
            </button>
            <button type="button" class="btn btn-primary" (click)="decline()">
              No
            </button>
          </div>
        </ng-template>

        <p class="card-text">{{ category.communityCategoryName }}</p>
        <span
          class="icon-container"
          [ngClass]="{
            hovered: isCategoryOrIconsHovered(category.communityCategoryID)
          }"
          *ngIf="isCategoryOrIconsHovered(category.communityCategoryID)"
        >
          <!-- <app-icon [iconName]="faEdit"></app-icon> -->
          <!-- <app-icon [iconName]="faDelete"></app-icon> -->
        </span>
      </div>
    </div>
  </div>
</div>
