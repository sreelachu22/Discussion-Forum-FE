<!-- category-threads.component.html -->
<div class="container">
  <!-- bread crumbs -->
  <div class="top_nav">
    <div>
      <a href="/home_page" class="breadcrumb_navigation">Home</a>
      <span> > </span>
      <a href="/community_page" class="breadcrumb_navigation">Community</a>
      <span> > </span>
      <a href="/category_threads" class="breadcrumb_navigation">Category</a>
    </div>
    <div class="user_search">
      <input
        type="text"
        placeholder="Search"
        class="search_input"
        [(ngModel)]="searchTerm"
        (keyup.enter)="searchResult(searchTerm)"
      />
      <button
        type="submit"
        class="search_button"
        (click)="searchResult(searchTerm)"
      >
        Search
      </button>
    </div>
  </div>
  <!-- nav bar -->
  <div class="navbar navbar-dark bg-secondary categorythreads_header">
    <div class="navbar_container">
      <h1 class="header_text">{{ CategoryThreads.categoryName }}</h1>
      <p class="header_description">
        {{ CategoryThreads.categoryDescription }}
      </p>
    </div>
    <div class="navbar_buttons">
      <app-button
        buttonClass="btn btn-primary"
        buttonName="Create Post"
        (buttonClick)="createPost()"
      ></app-button>
    </div>
  </div>

  <!-- post displayed here -->
  <!-- <app-list
    *ngFor="let thread of CategoryThreads.threads"
    [createdBy]="thread.createdBy"
    [status]="thread.threadStatusName"
    [createdOn]="formatDate(thread.createdAt)"
    [post]="thread.content"
    [votes]="thread.voteCount"
    [tags]="thread.tagNames.join(', ')"
    [isAnswered]="thread.isAnswered"
  ></app-list> -->

  <div *ngFor="let thread of CategoryThreads.threads">
    <app-list
    [sections]="[
      {
        title: 'Column 1',
        metadataItems: [
          { name: 'Created By', value: thread.createdBy },
          { name: 'Status', value: thread.threadStatusName },
          { name: 'Created At', value: formatDate(thread.createdAt) },
          { name: 'Votes', value: thread.voteCount }
        ]
      },
      {
        title: 'Column 2',
        metadataItems: [
          { name: 'Post', value: thread.content },
          { name: 'Tags', value: thread.tagNames.join(', ') }
        ]
      },
      {
        title: 'Column 3',
        metadataItems: [{ name: 'Is Answered', value: thread.isAnswered }]
      }
    ]"
  >
  </app-list>
  </div>

  <!-- pagination ui -->

  <div class="pagination">
    <button
      (click)="previousPage()"
      [disabled]="currentPage === 1"
      *ngIf="currentPage > 1"
    >
      Previous
    </button>

    <ng-container *ngFor="let page of pages">
      <button (click)="goToPage(page)" [class.active]="currentPage === page">
        {{ page }}
      </button>
    </ng-container>

    <button
      (click)="nextPage()"
      [disabled]="currentPage === totalPages"
      *ngIf="currentPage < totalPages"
    >
      Next
    </button>
  </div>
</div>
